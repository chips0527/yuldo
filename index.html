<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>율도원 입학의 날</title>
    <style>
        .button {
            background-color: #6a0dad;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        .button:hover {
            background-color: #8a2be2;
        }

        /* 오디오 시작 버튼을 좌상단으로 고정 */
        .audio-button {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 10; /* 버튼을 다른 요소 위에 표시 */
        }

        @font-face {
        font-family: '산하엽';
        src: url('https://github.com/chips0527/yuldo/raw/main/Diphylleia-Regular.ttf') format('truetype');
}

        /* body 스타일이 @font-face 이후에 오도록 수정 */
    body {
    font-family: '산하엽', sans-serif;
    margin: 0;
    background-color: #f4f4f9;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    background-size: cover;
    background-position: center;
}


        .step {
            display: none;
            position: relative;
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 600px;
        }

        .step.active {
            display: block;
        }

        .input-field {
            width: 80%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        .dorm-description {
            color: #333;
            font-size: 16px;
            line-height: 1.5;
            text-align: left;
            margin: 20px 0;
        }

        .button-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .button-container .button {
            margin: 10px 0;
        }
    </style>
</head>
<body>

    <!-- 효과음 재생용 오디오 태그 -->
    <audio id="clickSound1" src="https://github.com/chips0527/yuldowon/raw/main/9.mp3" preload="auto"></audio>
    <audio id="clickSound2" src="https://github.com/chips0527/yuldowon/raw/main/drink%20sound.mp3" preload="auto"></audio>

    <audio id="backgroundAudio" loop muted>
        <source src="https://github.com/chips0527/yuldowon/raw/main/horizon_nok.mp3" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>

    <button class="button audio-button" onclick="startAudio()">♫지평선이 사라지는 곳 - 녹음♫</button>

    <!-- Step 1 -->
    <div id="step1" class="step active">
        <h1>예디버스에 오신 걸 환영합니다.</h1>
        <p>여행자님이 도착하신 이곳은 설악산 위에 있는<br>500년 역사의 한국의 마법학교, <b>율도원(霱島園)</b>입니다.</p>
        <button class="button" onclick="playClickSound1(); goToNextStep(2)">네.</button>
    </div>

    <!-- Step 2 -->
    <div id="step2" class="step">
        <p>오늘은 3월 1일로, <b>율도원의 입학식</b>이 있는 날입니다.</p>
        <p>여행자님은 이 입학식에 참석하실 예정입니다.</p>
        <button class="button" onclick="playClickSound1(); goToNextStep(3)">드디어 마법 학교 입학이다..!</button>
    </div>

    <!-- Step 3 -->
    <div id="step3" class="step">
    <p>입학식에 앞서 준비할 것이 있습니다.</p>
    <p>여행자님에 대해 알려주세요.</p>
    <input type="text" id="name" class="input-field" placeholder="이름을 입력하세요" required>
    <input type="date" id="birthdate" class="input-field" placeholder="생년월일을 입력하세요" required>
    <input type="text" id="dayMaster" class="input-field" placeholder="일간을 입력하세요 (예: 갑목, 병화)" required>
    <button class="button" onclick="playClickSound1(); saveNameAndGoToNextStep()">다 적었어요.</button>
</div>



    <!-- Step 4 -->
    <div id="step4" class="step">
        <h1>율도원, 해질녘의 판석 광장</h1>
        <p>영매화가 입학을 축하하는 꽃비를 내려줍니다.<br>삼삼오오 앉아있는 아이들은</br>모두 이번 해의 신입생입니다.<br>
<span id="userNameDisplay"></span>님도 그 중 하나입니다.</p>
        <button class="button" onclick="playClickSound1(); goToNextStep(5)">두근두근</button>
    </div>

    <!-- Step 5 -->
    <div id="step5" class="step">
        <p><span id="userNameDisplay"></span>님이 앉아있는 소반 위에 <b>박달나무 차</b>가 한 잔 올라와 있습니다.<br>
        신입생의 기숙사 배정은 이 찻 잔으로 이루어집니다.</p>
        <p>설레이는 눈망울들이 연설 중인 부원장님께 향해 있습니다.<br>
        부원장님이 율도원의 기숙사에 대해 설명해주시네요.</p>
        <button class="button" onclick="playClickSound1(); goToNextStep(6)">저도 알고 싶어요.</button>
    </div>

    <!-- Step 6 -->
    <div id="step6" class="step">
        <h1>율도원의 기숙사</h1>
        <p>율도원의 기숙사는 오행에 따라 <b>다섯 가지</b>가 있습니다.</p>
        <p>- <font color="#B0C4DE">백작관</font>🕊<br>
        - <font color="#FF4500">적초관</font>🦊<br>
        - <font color="#228B22">청양관</font>🐐<br>
        - <font color="#000080">흑상관</font>🐬<br>
        - <font color="#D2691E">황접관</font>🦋</p>
        <button class="button" onclick="playClickSound1(); goToNextStep(7)">확인했어요.</button>
    </div>

    <!-- Step 7 -->
    <div id="step7" class="step">
        <p>부원장님의 연설이 끝났습니다.<br>
        이제 <b>기숙사 배정</b>이 시작 될 거에요.<br>
        <span id="userNameDisplay"></span>님의 운명은 어떤 기숙사와 함께 하게 될까요?</p>
        <p>책상에 놓인 박달나무 차를 마셔주세요.</p>
        <button class="button" onclick="playClickSound2(); goToNextStep(8)">차를 한 모금 마신다.</button>
    </div>

    <!-- Step 8 -->
    <div id="step8" class="step">
        <p>찻잔에서 기운이 파르르, 떨리더니<br>작은 소용돌이가 일었습니다.<br>
        선명한 색감이 찻잔 안에서부터 떠오릅니다.</p>
        <p><span id="userNameDisplay"></span>님의 기숙사는 <b><span id="assignedDorm"></span></b>입니다.</p>
        <button class="button" onclick="playClickSound1(); goToNextStep(9)">!!!</button>
    </div>

    <!-- Step 9 -->
    <div id="step9" class="step">
        <h2><span id="userNameDisplay"></span>님의 기숙사<span id="assignedDormName"></span></h2>
        <p id="dormDescription" class="dorm-description"></p>
        <button class="button" onclick="playClickSound1(); goToNextStep(10)">확인했어요.</button>
    </div>

    <!-- Step 10 -->
    <div id="step10" class="step">
        <p><span id="userNameDisplay"></span>님은 앞으로 이 기숙사에서</br>학우들과 동고동락하며 12년간 수학하게 됩니다.<br>즐거운 날도, 슬픈 날도 추억으로 쌓아갈</br>멋진 친구들도 생길 거에요.</p>
        <button class="button" onclick="playClickSound1(); goToNextStep(11)">네.</button>
    </div>

    <!-- Step 11 -->
    <div id="step11" class="step">
        <p>안내자인 제 역할은 여기까지 입니다.</p>
        <p><span id="userNameDisplay"></span>님의 율도원에서의 생활을 축복해 드리겠습니다.<br>
        율도원에서의 <span id="userNameDisplay"></span>님의 활약을 기대하겠습니다.<br>
        그럼 안녕히.</p>
        <button class="button" onclick="playClickSound1(); goToNextStep(12)">안녕-!</button>
    </div>

    <!-- Step 12 -->
    <div id="step12" class="step">
        <h1><율도원 입학의 날> 마침.</h1>
        <div class="button-container">
            <button class="button" onclick="playClickSound1(); restart()">기숙사 배정 다시 받기</button>
            <button class="button" onclick="playClickSound1(); closePage()">끝내기</button>
        </div>
    </div>

    <script>
        // 기숙사 설명 추가
        const dormDescriptions = {
            "백작관": "<span style='color: #B0C4DE;'><b>백작관</b></span>\n상징 동물: 하얀 까치\n상징 오행: 금속\n상징 색: 백색\n기숙사 상징 : 비상\n기숙사 이념: 이상(의義)\n창립 시기: 세종시기\n창립자: 백제 마장술 전승자 <김선화>",
            "적초관": "<span style='color: #FF4500;'><b>적초관</b></span>\n상징 동물: 붉은 담비\n상징 오행: 불\n상징 색: 붉은색\n기숙사 상징 : 열정\n기숙사 이념: 힘(예禮)\n창립 시기: 세종시기\n창립자: 4군 6진 개척기여자 <돈 지담> 장군",
            "청양관": "<span style='color: #228B22;'><b>청양관</b></span>\n상징 동물: 푸른 산양\n상징 오행: 나무\n상징 색: 푸른색\n기숙사 상징 : 포용\n기숙사 이념: 박애(인仁)\n창립 시기: 태종-세종 시기\n창립자: 동아시아의 유랑시인이자 마법역사학자인 <양 화명>",
            "황접관": "<span style='color: #D2691E;'><b>황접관</b></span>\n상징 동물: 황색 나비\n상징 오행: 흙\n상징 색: 황색\n기숙사 상징 : 인내\n기숙사 이념: 믿음(신信)\n창립 시기: 세종시기\n창립자: 대검무당, 의관인 <사비 화>",
            "흑상관": "<span style='color: #000080;'><b>흑상관</b></span>\n상징 동물: 검은 상괭이\n상징 오행: 물\n상징 색: 흑색\n기숙사 상징: 소통\n기숙사 이념: 지혜(지智)\n창립 시기: 세종시기\n창립자: 천문학자 겸 예언자 석 <호연겸>"
        };

        let currentStep = 1;

        let userName = localStorage.getItem('userName') || ''; // 저장된 이름 불러오기

// 페이지 로드 시 로컬 스토리지에 저장된 이름을 불러와서 입력창에 표시
window.onload = function() {
    const storedName = localStorage.getItem('userName');
    if (storedName) {
        document.getElementById('name').value = storedName;
    }
};

// 페이지 로드 시 로컬 스토리지에 저장된 이름을 불러와서 입력창에 표시
window.onload = function() {
    const storedName = localStorage.getItem('userName');
    if (storedName) {
        document.getElementById('name').value = storedName;
    }
    const displayName = storedName || "여행자"; // 사용자 이름이 없으면 "여행자"로 대체
    const nameDisplayElement = document.getElementById('userNameDisplay');
    if (nameDisplayElement) {
        nameDisplayElement.textContent = displayName;
    }
};


// 이름을 로컬 스토리지에 저장하고, 다음 스텝으로 이동하는 함수
function saveNameAndGoToNextStep() {
    const name = document.getElementById('name').value.trim(); // 입력된 이름
    if (name) {
        localStorage.setItem('userName', name); // 이름을 로컬 스토리지에 저장
    } else {
        alert("이름을 입력해 주세요.");
        return;
    }
    goToNextStep(4); // 그 후에 다음 스텝으로 이동
}


// 이름 입력 시 처리하는 함수
function handleNameInput() {
    userName = document.getElementById('name').value.trim(); // 입력된 이름을 저장
    if (userName) {
        localStorage.setItem('userName', userName); // 로컬 스토리지에 이름 저장
        alert("이름이 저장되었습니다.");
    } else {
        alert("이름을 입력해 주세요.");
    }
}

// Step 이동 처리 함수
function goToNextStep(step) {
    // 이전 스텝 숨기기
    document.querySelector(`#step${currentStep}`).classList.remove('active');
    // 다음 스텝 표시하기
    document.querySelector(`#step${step}`).classList.add('active');
    currentStep = step;
    updateBackgroundImage(step);

    const displayName = userName || "여행자"; // 사용자 이름이 없으면 "여행자"로 대체
    const nameDisplayElement = document.getElementById('userNameDisplay');
    if (nameDisplayElement) {
        nameDisplayElement.textContent = displayName;
    }

    // Step 8에서 기숙사 배정 처리
    if (step === 8) {
        const dayMaster = document.getElementById('dayMaster').value.trim();
        if (!dayMaster) {
            alert("일간을 입력해 주세요.");
            return;
        }

        const firstChar = dayMaster.charAt(0);
        const dorms = {
            "갑": "청양관",
            "을": "청양관",
            "병": "적초관",
            "정": "적초관",
            "무": "황접관",
            "기": "황접관",
            "경": "백작관",
            "신": "백작관",
            "임": "흑상관",
            "계": "흑상관"
        };

        const assignedDorm = dorms[firstChar] || "알 수 없음";
        document.getElementById('assignedDorm').innerText = assignedDorm;

        const dormColor = {
            "청양관": "#228B22",
            "적초관": "#FF4500",
            "황접관": "#D2691E",
            "백작관": "#B0C4DE",
            "흑상관": "#000080"
        };

        document.getElementById('assignedDorm').style.color = dormColor[assignedDorm];

        const dormDescriptionElement = document.getElementById('dormDescription');
        dormDescriptionElement.innerHTML = dormDescriptions[assignedDorm]
            .split("\n")
            .map(line => `<p>${line}</p>`)
            .join("");
    }
}


// 이름 입력 시 저장
function handleNameInput() {
    userName = document.getElementById('name').value.trim(); // 사용자가 입력한 이름을 저장
}


       // 배경 이미지 업데이트 함수
        function updateBackgroundImage(step) {
    const backgroundImages = {
        1: "url('https://github.com/chips0527/yuldo/raw/main/map.jpg')",
        2: "url('https://github.com/chips0527/yuldo/raw/main/map.jpg')",
        3: "url('https://github.com/chips0527/yuldowon/raw/main/lostislandBG.png')",
        4: "url('https://github.com/chips0527/yuldo/raw/main/sunset.jpg')",
        5: "url('https://github.com/chips0527/yuldo/raw/main/sunset.jpg')",
        6: "url('https://github.com/chips0527/yuldo/raw/main/sunset.jpg')",
        7: "url('https://github.com/chips0527/yuldo/raw/main/sunset.jpg')",
        8: "url('https://github.com/chips0527/yuldo/raw/main/sunset.jpg')",
        9: "url('https://github.com/chips0527/yuldo/raw/main/sunset.jpg')",
        10: "url('https://github.com/chips0527/yuldo/raw/main/sunset.jpg')",
        11: "url('https://github.com/chips0527/yuldo/raw/main/sunset.jpg')",
        12: "url('https://github.com/chips0527/yuldo/raw/main/map.jpg')"  // 수정된 부분
    };
    document.body.style.backgroundImage = backgroundImages[step];
}

document.addEventListener("DOMContentLoaded", function() {
    updateBackgroundImage(1);  // 첫 번째 스텝 배경 이미지 설정
});

        // 시작 버튼 클릭 시 배경음악 시작
        function startAudio() {
            document.getElementById('backgroundAudio').play();
            document.getElementById('backgroundAudio').muted = false; // 음소거 해제
        }

        // 클릭 소리 재생
        function playClickSound1() {
            document.getElementById('clickSound1').play();
        }

        function playClickSound2() {
            document.getElementById('clickSound2').play();
        }

        // 재시작 버튼
        function restart() {
            currentStep = 1;
            document.querySelectorAll('.step').forEach(step => step.classList.remove('active'));
            document.querySelector('#step1').classList.add('active');
            document.getElementById('backgroundAudio').pause();
            document.getElementById('backgroundAudio').currentTime = 0;
        }

        // 종료
        function closePage() {
            window.close();
        }
    </script>
</body>
</html>
