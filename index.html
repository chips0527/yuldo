<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>율도원 기숙사 배정</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background-color: #f4f4f9;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-size: cover;
            background-position: center;
        }

        .step {
            display: none;
            position: relative;
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.8); /* 배경을 반투명 화이트로 설정 */
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 600px;
        }

        .step.active {
            display: block;
        }

        h1, h2, h3 {
            color: #6a0dad;
            font-size: 36px; /* 큰 글씨 */
        }

        .button {
            background-color: #6a0dad;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 0;
        }

        .button:hover {
            background-color: #8a2be2;
        }

        .input-field {
            width: 80%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        .result, #finalMessage {
            margin-top: 20px;
            font-size: 18px;
            color: #555;
        }

        .dorm-description {
            color: #555;
            white-space: pre-line;
        }

        /* 기숙사 색상에 맞는 스타일 */
        .cheongyang {
            color: #228B22; /* 청양관 (Wood) - Green */
        }

        .jeokcho {
            color: #FF4500; /* 적초관 (Fire) - Orange */
        }

        .hwangjeop {
            color: #D2691E; /* 황접관 (Earth) - Brown */
        }

        .baekjak {
            color: #B0C4DE; /* 백작관 (Metal) - Light Steel Blue */
        }

        .heuksang {
            color: #000080; /* 흑상관 (Water) - Navy Blue */
        }
    </style>
</head>
<body>
    <!-- 오디오 태그 -->
    <audio autoplay loop>
        <source src="https://github.com/chips0527/yuldowon/raw/main/horizon_nok.mp3" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>

<!-- Step 1 -->
<div id="step1" class="step active">
    <h1>예디버스에 오신 걸 환영합니다.</h1>
    <p>율도원 입학식에 참석하시겠습니까?</p>
    <button class="button" onclick="goToNextStep(2)">예</button>
</div>

<!-- Step 2 -->
<div id="step2" class="step">
    <h1>입학식에 앞서 당신에 대해 알려주세요</h1>
    <input type="text" id="name" class="input-field" placeholder="이름을 입력하세요" required>
    <input type="date" id="birthdate" class="input-field" placeholder="생년월일을 입력하세요" required>
    <input type="text" id="dayMaster" class="input-field" placeholder="일간을 입력하세요 (예: 갑목, 병화)" required>
    <button class="button" onclick="goToNextStep(3)">다음</button>
</div>

<!-- Step 3 -->
<div id="step3" class="step">
    <h1>해질녘의 율도원 대광장</h1>
    <p>오늘 율도원에 입학한 당신은<br>기숙사를 배정받는 의식을 위해 이곳에 있습니다.<br>
    동갑의 소년, 소녀들이 삼삼오오 모여 앉아있고<br>
    저 앞에선 율도원 부원장님이 연설을 하고 있습니다.</p>
    <button class="button" onclick="goToNextStep(4)">다음</button>
</div>

<!-- Step 4 -->
<div id="step4" class="step">
    <h2>“ㅡ의식을 시작하겠습니다.”</h2>
    <p>부원장의 긴 연설이 끝나고, 드디어 배정을 받게 됩니다.<br>눈 앞에 있는 박달나무 차를 마셔주세요.</p>
    <button class="button" onclick="goToNextStep(5)">차를 한 모금 마신다.</button>
</div>

<!-- Step 5 -->
<div id="step5" class="step">
    <p>찻물의 색이 변하며, 기숙사의 상징색이 떠오릅니다.</p>
    <p>당신의 기숙사는 <span id="assignedDorm"></span>입니다.</p>
    <button class="button" onclick="goToNextStep(6)">확인</button>
</div>

<!-- Step 6 (Ending) -->
<div id="step6" class="step">
    <p>당신은 이 기숙사에서 9년간 수학하며,</p>
    <p>친구들과 다양한 추억을 쌓아 성장하게 됩니다.</p>
    <p>앞으로 당신의 율도원에서의 활약을 기대하겠습니다.</p>
    <button class="button" onclick="goToNextStep(7)">종료</button>
</div>

<!-- Step 7 -->
<div id="step7" class="step">
    <div class="button-container">
        <button class="button" onclick="restart()">기숙사 다시 배정받기</button>
        <button class="button" onclick="closePage()">종료</button>
    </div>
</div>

<style>
    /* 마지막 두 버튼을 수직으로 배치 */
    .button-container {
        display: flex;
        flex-direction: column;
        align-items: center; /* 버튼을 수평 가운데로 정렬 */
    }

    .button-container .button {
        margin: 10px 0; /* 버튼 사이에 여백 추가 */
    }
</style>


<script>

        // Step 시작 시 오디오 재생
    const audio = new Audio("https://raw.githubusercontent.com/chips0527/yuldowon/main/horizon.mp3");
    audio.loop = true;

    function goToNextStep(step) {
        if (!audio.paused) audio.play(); // 재생이 멈췄다면 다시 재생
        document.querySelector(`#step${currentStep}`).classList.remove('active');
        document.querySelector(`#step${step}`).classList.add('active');
        currentStep = step;
        updateBackgroundImage(step);
    }

    let currentStep = 1;

    function goToNextStep(step) {
        document.querySelector(`#step${currentStep}`).classList.remove('active');
        document.querySelector(`#step${step}`).classList.add('active');
        currentStep = step;

        // Step 4: 배정 로직
        if (step === 4) {
            const dayMaster = document.getElementById('dayMaster').value.trim();
            const firstChar = dayMaster.charAt(0);

            const dorms = {
                "갑": "청양관",
                "을": "청양관",
                "병": "적초관",
                "정": "적초관",
                "무": "황접관",
                "기": "황접관",
                "경": "백작관",
                "신": "백작관",
                "임": "흑상관",
                "계": "흑상관"
            };

            const assignedDorm = dorms[firstChar] || "알 수 없음";
            document.getElementById('assignedDorm').innerText = assignedDorm;

            // 기숙사 색상에 맞는 클래스 추가
            const dormColor = {
                "청양관": "cheongyang",
                "적초관": "jeokcho",
                "황접관": "hwangjeop",
                "백작관": "baekjak",
                "흑상관": "heuksang"
            };
            
            // 색상 클래스 추가
            document.getElementById('assignedDorm').classList.add(dormColor[assignedDorm] || "");
        }

        // 배경 이미지 변경
        updateBackgroundImage(step);
    }

    // 배경 이미지를 업데이트하는 함수
    function updateBackgroundImage(step) {
        switch (step) {
            case 1:
            case 2:
                document.body.style.backgroundImage = "url('https://github.com/chips0527/yuldowon/raw/main/lostislandBG.png')";
                break;
            case 3:
            case 4:
            case 5:
            case 6:
                document.body.style.backgroundImage = "url('https://github.com/chips0527/yuldowon/raw/main/sunset.png')";
                break;
            case 7:
                document.body.style.backgroundImage = "url('https://github.com/chips0527/yuldowon/raw/main/map.png')";
                break;
            default:
                document.body.style.backgroundImage = "url('https://github.com/chips0527/yuldowon/raw/main/lostislandBG.png')";
                break;
        }
    }

    // 페이지 로드 시 배경 설정
    window.onload = function() {
        updateBackgroundImage(currentStep);
    };

    function restart() {
        location.reload();  // 새로고침으로 다시 시작
    }

    function closePage() {
        window.close();  // 페이지 닫기
    }
</script>

</body>
</html>
